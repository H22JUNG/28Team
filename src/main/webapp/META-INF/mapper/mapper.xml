<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goodee.dao.ProjectDAO">

	<select id="login" resultType="int" parameterType="userVO">
		select count(*) from user
		where userid = #{userid} and password = #{password}
	</select>
	<select id="getUser" resultType="userVO" parameterType="userVO">
		select id, userid, username, tel, email from user
		where userid = #{userid} and password = #{password}
	</select>
	<select id="isAdmin" resultType="int" parameterType="userVO">
		select count(*) from user
		where userid = #{userid} and password = #{password} and admin = 1
	</select>
	
	<!-- product list -->
	<!-- 카테고리별 -->
	<select id="selectCategory" resultType="productVO" parameterType="productVO">
		select pic1, pic2, pic3, pic4, name, price, discount, view, date_format (create_date, '%Y-%m-%d %T') 'createDate'
		from product
		where category1 = #{category1}
	</select>
	<select id="selectInnerCategory" resultType="productVO" parameterType="productVO">
		select pic1, pic2, pic3, pic4, name, price, discount, view, date_format (create_date, '%Y-%m-%d %T') 'createDate'
		from product
		where category2 = #{category2}
	</select>
	
	
	<!-- 내가 쓴 글 -->
		<select id="getwrote" resultType="wroteVO" parameterType="userVO">
		select id, category, title, content, owner_id, owner, date_format(create_date, '%Y-%m-%d') createDate, re_id 
		from wrotebbs where re_id=0 and owner_id=#{id}
	</select>
	<select id="getRewrote" resultType="wroteVO">
		select id, category, title, content, owner_id, owner, date_format(create_date, '%Y-%m-%d') createDate, re_id 
		from wrotebbs where re_id !=0
	</select>
	<select id="getsearch" resultType="wroteVO" parameterType="String">
		select id, category, title, content, owner_id, owner, date_format(create_date, '%Y-%m-%d') createDate, re_id 
		from wrotebbs 
		where category = #{category}
	</select>
	<select id="getdetail" resultType="wroteVO" parameterType="wroteVO">
		select id, category, title, owner, date_format(create_date, '%Y-%m-%d') createDate, content
		from wrotebbs 
		where id=#{id}
	</select>
	<update id="modify" parameterType="wroteVO">
		update wrotebbs set title=#{title}, content=#{content}
		where id=#{id}
	</update>
	<delete id="getdelete">
		delete from wrotebbs where re_id=#{id} or id=#{id};
	</delete>
	
	<!-- 유진 mapper, 주문페이지에서 입력한 정보 전송 -->
	<insert id="orderUserInfor" parameterType="orderUser"> 
 	insert into orderUserbbs(id,order_name,pay,address,detailAddress,extraAddress,order_tel,point)
 	values(#{id},#{orderName},#{pay},#{address},#{detailAddress},#{extraAddress},#{orderTel},#{point})
	</insert>
	
	
</mapper>